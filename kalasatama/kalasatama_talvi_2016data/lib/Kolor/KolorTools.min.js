(function(){var g=void 0,l=!0,m=null,n=!1;function p(){return function(){}}
(function(){ktools={h:function(){var a="en",c=[],d=new ktools.j;this.getLanguage=this.ga=function(){return a};this.getAvailableLanguages=this.ba=function(){return c};this.initLanguage=this.ra=function(c,b){a=c;for(var f=ktools.q.G(b),j=f.getElementsByTagName("data").length,i=g,k=0;k<j;k++)i=f.getElementsByTagName("data")[k].textContent!=g?f.getElementsByTagName("data")[k].textContent:g,i==g&&f.getElementsByTagName("data")[k].innerText&&(i=f.getElementsByTagName("data")[k].innerText),i==g&&f.getElementsByTagName("data")[k].innerHTML&&
(i=f.getElementsByTagName("data")[k].innerHTML),i==g&&f.getElementsByTagName("data")[k].text&&(i=f.getElementsByTagName("data")[k].text),i==g&&f.getElementsByTagName("data")[k].firstChild&&(i=f.getElementsByTagName("data")[k].firstChild.data),d.add(f.getElementsByTagName("data")[k].getAttribute("name"),i)};this.getMessage=this.ha=function(c){return d.item(a+"_"+c)}}};ktools.I18N=ktools.h;ktools.h.a=m;ktools.I18N.instance=ktools.h.a;ktools.h.d=function(){this.a==m&&(this.a=new ktools.h);return this.a};
ktools.I18N.getInstance=ktools.h.d;ktools.q=p();ktools.XML=ktools.q;ktools.q.G=function(a){var c=m,d=m,h=n;try{c=new XMLHttpRequest,c.open("GET",a,n)}catch(b){if("undefined"!=typeof window.ActiveXObject){d=new ActiveXObject("Microsoft.XMLDOM");for(d.async=n;4!=d.readyState;);d.load(a);h=l;return d}d=document.implementation.createDocument("","",m);d.onload=function(){return d};d.load(a);h=l}if(!h)return c.send(""),d=c.responseXML,h=l,d};ktools.XML.importXML=ktools.q.G;ktools.w=p();ktools.Device=ktools.w;
ktools.w.Ca=function(){return"ontouchstart"in window||"ontouchstart"in document.documentElement||window.Ua&&document instanceof DocumentTouch};ktools.Device.isTouch=ktools.w.Ca;ktools.e=p();ktools.DOM=ktools.e;ktools.e.ia=function(a){for(var c=y=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft-a.scrollLeft,y+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{x:c,y:y}};ktools.DOM.getOffset=ktools.e.ia;ktools.e.preventDefault=function(a){e=a?a:window.event;e.preventDefault?e.preventDefault():
e.returnValue=n};ktools.DOM.preventDefault=ktools.e.preventDefault;ktools.e.Ra=function(a){e=a?a:window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=l};ktools.DOM.stopEventPropagation=ktools.e.Ra;ktools.n=p();ktools.String=ktools.n;ktools.n.Qa=function(a,c){return a.match("^"+c)==c};ktools.String.startsWith=ktools.n.Qa;ktools.n.W=function(a){var c=a,c=jQuery("<div/>").html(a).text();return unescape(c)};ktools.String.decode=ktools.n.W;ktools.v=p();ktools.Code=ktools.v;ktools.v.eval=function(a){a=
a.replace(/(\r\n|\n|\r|\t)/gm,"");eval(a)};ktools.Code.eval=ktools.v.eval;ktools.z=p();ktools.Url=ktools.z;ktools.z.ja=function(a,c){var c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),d=RegExp("[\\?&]"+c+"=([^&#]*)").exec(a);return d==m?"":d[1]};ktools.Url.getParam=ktools.z.ja;ktools.m=p();ktools.Color=ktools.m;ktools.m.pa=function(a,c){var d=/^#?[0-9a-f]{3,6}$/i.test(a);return"undefined"!=typeof a&&(7==a.length||4==a.length)&&d?a.toUpperCase():"undefined"!=typeof a&&(6==a.length||3==a.length)&&
d?"#"+a.toUpperCase():"undefined"!=typeof c?c:"#FFFFFF"};ktools.Color.htmlColor=ktools.m.pa;ktools.m.oa=function(a){var c=[];c[0]=parseInt(a.substr(0,2),16);c[1]=parseInt(a.substr(2,2),16);c[2]=parseInt(a.substr(4,2),16);return c};ktools.Color.hex2rgb=ktools.m.oa;ktools.N=function(){function a(b){var a=b.indexOf(this.u);return-1==a?g:parseFloat(b.substring(a+this.u.length+1))}function c(b){for(var a=0,c=b.length;a<c;a++){var d=b[a].string,k=b[a].prop;this.u=b[a].versionSearch||b[a].identity;if(d){if(-1!=
d.indexOf(b[a].subString))return b[a].identity}else if(k)return b[a].identity}}this.versionSearchString=this.u=this.version=this.version=this.OS=this.f=this.browser=this.browser="";var d=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,
subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,
subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],h=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];this.isIE=this.I=function(){return"Explorer"==
this.browser};this.isVista=this.Da=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.0")};this.isXP=this.Ja=function(){return-1!=navigator.userAgent.indexOf("Windows NT 5")};this.isWindows7=this.Ha=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.1")};this.isWindows8=this.Ia=function(){return-1!=navigator.userAgent.indexOf("Windows NT 6.2")};this.isWindows=this.Ga=function(){return"Windows"==this.f};this.isLinux=this.ya=function(){return"Linux"==this.f};this.isWP8=this.Fa=
function(){return-1!=navigator.userAgent.indexOf("Windows Phone 8")};this.isWP7=this.Ea=function(){return-1!=navigator.userAgent.indexOf("Windows Phone 7")};this.isAndroid=this.sa=function(){return-1!=navigator.userAgent.indexOf("Android")};this.isIE9=this.va=function(){return this.I()&&9==this.D()};this.isMac=this.za=function(){return"Mac"==this.f||this.s()};this.isIOS=this.s=function(){return"iPhone/iPod"==this.f||"iPad"==this.f};this.isIOSRetina=this.wa=function(){return this.s()&&1<window.devicePixelRatio};
this.isMobileSafari=this.Aa=function(){return this.K()&&this.s()};this.isSafari=this.K=function(){return"Safari"==this.browser};this.isChrome=this.ta=function(){return"Chrome"==this.browser};this.isFirefox=this.ua=function(){return"Firefox"==this.browser||"Mozilla"==this.browser};this.isOpera=this.Ba=function(){return"Opera"==this.browser};this.getInternetExplorerVersion=this.D=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var d=navigator.userAgent,c=/MSIE ([0-9]{1,}[.0-9]{0,})/;
c.exec(d)!=m&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(d=navigator.userAgent,c=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,c.exec(d)!=m&&(a=parseFloat(RegExp.$1)));return a};this.init=this.qa=function(){this.browser=c(d)||"An unknown browser";this.version=a(navigator.userAgent)||a(navigator.appVersion)||"An unknown version";this.f=c(h)||"An unknown OS"}};ktools.BrowserDetect=ktools.N;ktools.P=function(a){var c=["webkit","moz","ms","o","khtml"],d=a||document.documentElement,h=n,b="",
f="",j={enter:m,exit:m,change:m,resize:m},i=n;this.getExternal=this.b=function(){return j};this.setExternal=this.Pa=function(a){j=a};this.isFullscreen=this.A=function(){return""===b?document.fullscreen?document.fullscreen:document.fullScreen:"webkit"==b?document[b+"IsFullscreen"]?document[b+"IsFullscreen"]:document[b+"IsFullScreen"]:document[b+"Fullscreen"]?document[b+"Fullscreen"]:document[b+"FullScreen"]};this.getFullscreenElement=this.o=function(){if(h){var a=document;return""===b?a.$?a.$:a.Wa:
a[b+"FullscreenElement"]?a[b+"FullscreenElement"]:a[b+"FullScreenElement"]}return m};this.getFullscreenEnabled=this.fa=function(){if(h)return l;var a=document;if(""===b)return a.aa?a.aa:a.Xa;if("webkit"==b){if(kolorBrowserDetect&&"Safari"==kolorBrowserDetect.browser&&7>kolorBrowserDetect.version)return n;if(a[b+"RequestFullscreen"])return a[b+"RequestFullscreen"];console.log(a[b+"RequestFullScreen"]);return a[b+"RequestFullScreen"]}return a[b+"FullscreenEnabled"]?a[b+"FullscreenEnabled"]:a[b+"FullScreenEnabled"]};
this.supportsFullscreen=this.Sa=function(){debug&&console.log("ktools.Fullscreen.supportsFullscreen");f="";if("undefined"!=typeof document.exitFullscreen||"undefined"!=typeof document.exitFullScreen||"undefined"!=typeof document.cancelFullscreen||"undefined"!=typeof document.cancelFullScreen)h=l,f+="fullscreenchange";else for(var a=0,j=c.length;a<j;a++){b=c[a];if("undefined"!=typeof document[b+"CancelFullScreen"]||"undefined"!=typeof document[b+"CancelFullscreen"]||"undefined"!=typeof document[b+
"ExitFullscreen"]||"undefined"!=typeof document[b+"ExitFullScreen"]){if("webkit"==b&&kolorBrowserDetect&&"Safari"==kolorBrowserDetect.browser&&7>kolorBrowserDetect.version){h=n;break}h=l;f="ms"==b?f+"MSFullscreenChange":f+b+"fullscreenchange";break}if("webkit"==b){var q=d;if(q.webkitSupportsFullscreen){h=q.webkitSupportsFullscreen;break}}}a="#"+d.id+":fullscreen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }";a+="#"+d.id+":fullscreen::backdrop { background-color: black; }";
a+="#"+d.id+":full-screen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }";""!=b&&d.id&&("ms"==b?(a+="#"+d.id+":-"+b+"-fullscreen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }",a+="#"+d.id+":-"+b+"-fullscreen::-"+b+"-backdrop { background-color: black; }"):a+="#"+d.id+":-"+b+"-full-screen { height: 100% !important; width: 100% !important; max-height: 100% !important; background-color: black; }");
j=document.createElement("style");j.type="text/css";j.styleSheet?j.styleSheet.cssText=a:j.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(j);var o=this;document.addEventListener?document.addEventListener(f,function(){i=o.o()!=m?l:n;if(o.b().change&&o.b().resize){o.b().change(i);o.b().resize()}}):f&&document.attachEvent(f,function(){i=o.o()!=m?l:n;if(o.b().change&&o.b().resize){o.b().change(i);o.b().resize()}});return h};this.request=this.Ma=function(){debug&&
console.log("ktools.Fullscreen.request");if(h){if(!this.A()||!this.o())if(""===b)d.Na?d.Na():d.Ya();else if(d[b+"RequestFullscreen"])if("webkit"==b)d[b+"RequestFullscreen"](Element.M);else d[b+"RequestFullscreen"]();else if("webkit"==b)d[b+"RequestFullScreen"](Element.M);else d[b+"RequestFullScreen"]()}else this.b().enter&&this.b().enter()};this.exit=this.X=function(){debug&&console.log("ktools.Fullscreen.exit");if(h){if(this.A()||this.o()){var a=document;if(""===b)a.Z?a.Z():a.Y?a.Y():a.V?a.V():a.Va();
else if(a[b+"ExitFullscreen"])a[b+"ExitFullscreen"]();else if(a[b+"ExitFullScreen"])a[b+"ExitFullScreen"]();else if(a[b+"CancelFullscreen"])a[b+"CancelFullscreen"]();else a[b+"CancelFullScreen"]()}}else this.b().exit&&this.b().exit()}};ktools.Fullscreen=ktools.P;ktools.l=function(){var a=[];this.add=this.add=function(c){a.push(c)};this.remove=this.remove=function(c){for(var d=0;d<a.length;d++)a[d]==c&&a.splice(d,1)};this.get=this.get=function(c){return a[c]};this.toArray=this.toArray=function(){return a};
this.size=this.size=function(){return a.length}};ktools.Collection=ktools.l;ktools.j=function(){this.count=this.count=0;this.map=this.map={};this.add=this.add=function(a,c){if("undefined"!=typeof a){if(this.map[a]!=g)return this.count;this.map[a]=c;return++this.count}};this.update=this.update=function(a,c){if("undefined"!=typeof a)return this.map[a]=c,this.count};this.remove=this.remove=function(a){if(this.map[a]!=g)return delete this.map[a],--this.count};this.item=this.item=function(a){return this.map[a]};
this.keys=this.keys=function(){var a=new ktools.l,c;for(c in this.map)a.add(c);return a.toArray()};this.values=this.Ta=function(){var a=new ktools.l,c;for(c in this.map)a.add(this.map[c]);return a.toArray()}};ktools.Map=ktools.j;ktools.c=function(){if(ktools.c.caller!=ktools.c.d)throw Error("This object cannot be instanciated, use getInstance.");var a=new ktools.j,c=new ktools.j;this.loadScript=this.g=function(d,c,b){if("undefined"==typeof a.item(d)){a.add(d,c);var f=document.createElement("script");
f.type="text/javascript";f.readyState?f.onreadystatechange=function(){if("loaded"==f.readyState||"complete"==f.readyState)f.onreadystatechange=m,b&&b()}:f.onload=function(){b&&b()};f.src=c;document.getElementsByTagName("head")[0].appendChild(f);debug&&console.log("DynamicLoader : loadScript "+d)}else debug&&console.log("DynamicLoader : "+d+" already loading/loaded"),b&&b()};this.loadCss=this.p=function(a,h){debug&&console.log("preparing css "+a);if("undefined"==typeof c.item(a)){c.add(a,h);var b=
document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=h;b.media="screen";b.title="dynamicLoadedSheet";document.getElementsByTagName("head")[0].appendChild(b);debug&&console.log("css "+a+" added")}else debug&&console.log("css "+a+" already added")}};ktools.DynamicLoader=ktools.c;ktools.c.a=m;ktools.DynamicLoader.instance=ktools.c.a;ktools.c.d=function(){this.a==m&&(this.a=new ktools.c);return this.a};ktools.DynamicLoader.getInstance=ktools.c.d;ktools.R=function(a,c,d,h){var b=
this,f=h,j=n,i=new ktools.j;this.getName=this.getName=function(){return a};this.getUrl=this.k=function(){return c};this.getDependances=this.da=function(){return d};this.isLoaded=this.B=function(){return j};this.setLoaded=this.L=function(a){j=a};this.isPrimaryNode=this.J=function(){"undefined"==typeof f&&(f=n);return f};this.getParentsToCall=this.F=function(){return i};this.addParentToCall=this.C=function(a){"undefined"!=typeof a&&a!=m&&i.add(a.getName(),a)};this.loadScript=this.g=function(a){b.C(a);
if(b.B())return b.r();if(0==d.length)ktools.c.d().g(b.getName(),b.k(),b.r);else for(a=0;a<d.length;a++)d[a].g(b)};this.callback=this.r=function(){debug&&console.log("script info : "+b.getName()+" loaded !");b.L(l);for(var a=b.F(),c=m,d=a.keys(),f=0;f<a.count;f++)c=a.item(d[f]),ktools.c.d().g(c.getName(),c.k(),c.r)}};ktools.Script=ktools.R;ktools.O=function(a,c){var d=this;this.getName=this.getName=function(){return a};this.getUrl=this.k=function(){return c};this.loadCss=this.p=function(){ktools.c.d().p(d.getName(),
d.k())}};ktools.CssStyle=ktools.O;ktools.Q=function(a){var c=new ktools.l,d=new ktools.l,h=m,b=n,f=m;this.getPluginName=this.la=function(){return a};this.addScript=this.U=function(a){c.add(a)};this.getScripts=this.na=function(){return c};this.addCss=this.S=function(a){d.add(a)};this.getCss=this.ca=function(){return d};this.setEditorScript=this.Oa=function(a){h=a};this.getEditorScript=this.ea=function(){return h};this.register=this.Ka=function(a){f=a;return this};this.getRegistered=this.ma=function(){return f};
this.isInitialized=this.xa=function(){for(var a=0;a<c.size();a++)b|=c.get(a).B();return b};this.initialize=this.H=function(){for(var a=m,b=0;b<d.size();b++)a=d.get(b),a.p();a=m;for(b=0;b<c.size();b++)a=c.get(b),a.J()&&a.g()}};ktools.KolorPlugin=ktools.Q;ktools.i=function(){this.pluginList=this.t=new ktools.j;this.addPlugin=this.T=function(a,c,d){this.t.add(a,c);("undefined"==typeof d||d)&&c.H()};this.removePlugin=this.La=function(a){this.t.remove(a)};this.getPlugin=this.ka=function(a){return this.t.item(a)}};
ktools.KolorPluginList=ktools.i;ktools.i.a=m;ktools.KolorPluginList.instance=ktools.i.a;ktools.i.d=function(){this.a==m&&(this.a=new ktools.i);return this.a};ktools.KolorPluginList.getInstance=ktools.i.d})();})();